<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ title or "Task Manager" }}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      body { background: #0b1020; }
      .bg-blur {
        background: rgba(255,255,255,0.06);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.10);
      }
      .text-soft { color: #fff; }
      .brand-dot {
        display:inline-block; width:10px; height:10px; border-radius:50%;
        background: #7c3aed; margin-right:8px;
        box-shadow: 0 0 0 6px rgba(124,58,237,0.15);
      }
      .page-wrap { min-height: 100vh; }
      .table { --bs-table-bg: transparent; --bs-table-color: #fff; }
      .table th, .table td { color: #fff !important; }
      .form-control.bg-white::placeholder { color: #6c757d; }
    </style>
  </head>
  <body>
    <div class="page-wrap d-flex flex-column">
      <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container py-2">
          <a class="navbar-brand fw-semibold" href="{{ url_for('home') if current_user.is_authenticated else url_for('landing') }}">
            <span class="brand-dot"></span>MyTaskManager
          </a>
          <div class="d-flex align-items-center gap-2">
            {% if current_user.is_authenticated %}
              <div class="d-flex align-items-center gap-2">
                <span class="text-soft small">Mode</span>
                <form method="post" action="{{ url_for('set_mode') }}" class="d-inline">
                  <input type="hidden" name="mode" value="work" />
                  <button type="submit" class="btn btn-sm {% if session.get('mode','work') == 'work' %}btn-light{% else %}btn-outline-light{% endif %}">Work</button>
                </form>
                <form method="post" action="{{ url_for('set_mode') }}" class="d-inline">
                  <input type="hidden" name="mode" value="personal" />
                  <button type="submit" class="btn btn-sm {% if session.get('mode','work') == 'personal' %}btn-light{% else %}btn-outline-light{% endif %}">Personal</button>
                </form>
              </div>
              <span class="text-soft small">Signed in as <span class="text-white">{{ current_user.username }}</span></span>
              <a href="{{ url_for('contact') }}" class="btn btn-sm btn-outline-light">Contact Me</a>
              <form method="post" action="{{ url_for('logout') }}">
                <button class="btn btn-sm btn-outline-light">Logout</button>
              </form>
            {% endif %}
          </div>
        </div>
      </nav>

      <main class="flex-grow-1">
        <div class="container py-4">
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              <div class="mb-3">
                {% for category, message in messages %}
                  <div class="alert alert-{{ category }} mb-2">{{ message }}</div>
                {% endfor %}
              </div>
            {% endif %}
          {% endwith %}

          {% block content %}{% endblock %}
        </div>
      </main>

      <footer class="py-4">
        <div class="container text-center text-soft small">
          MVP Task Manager • SQLite • Flask
        </div>
      </footer>
    </div>
  </body>
</html>


